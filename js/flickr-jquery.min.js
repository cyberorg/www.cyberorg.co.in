(function(c,e,f,a){var d="flickr",b={apiKey:"",photosetId:"",errorText:"Error generating gallery.",loadingSpeed:38,photosLimit:30},h="https://api.flickr.com/services/rest/",i=[];function g(k,j){this.element=c(k);this.settings=c.extend({},b,j);this._defaults=b;this._name=d;this._hideSpinner=function(){this.element.find(".spinner-wrapper").hide().find("*").hide()};this._printError=function(){this.element.find(".gallery-container").append(c("<div></div>",{"class":"col-lg-12 col-lg-offset-1"}).append(c("<div></div>",{"class":"error-wrapper"}).append(c("<span></span>",{"class":"label label-danger error"}).html(this.settings.errorText))))};this._flickrAnimate=function(){this.element.find(".gallery-container img").each(c.proxy(function(l,m){var n=m;setTimeout(function(){c(n).parent().fadeIn()},this.settings.loadingSpeed*l)},this))};this._printGallery=function(m){var l=this.element.find(".gallery-container");c.each(m,function(p,o){var n=c("<img>",{"class":"thumb img-thumbnail img-responsive",src:o.thumbnail});l.append(c("<div></div>",{"class":"col-lg-2 col-md-2 col-xs-6 col-center nopadding"}).append(c("<a></a>",{"class":"",href:o.href,"data-gallery":""}).hide().append(n)))});l.imagesLoaded().done(c.proxy(this._flickrAnimate,this)).always(c.proxy(this._hideSpinner,this))};this._flickrPhotoset=function(m){var l=this;i[m.id]=[];c.each(m.photo,function(o,n){if(o>=l.settings.photosLimit){return false}i[m.id][o]={thumbnail:"http://farm"+n.farm+".static.flickr.com/"+n.server+"/"+n.id+"_"+n.secret+"_q.jpg",href:"http://farm"+n.farm+".static.flickr.com/"+n.server+"/"+n.id+"_"+n.secret+"_b.jpg"}});this._printGallery(i[m.id])};this._onFlickrResponse=function(l){if(l.stat==="ok"){this._flickrPhotoset(l.photoset)}else{this._hideSpinner();this._printError()}};this._flickrRequest=function(n,m){var l=h+"?format=json&jsoncallback=?&method="+n+"&api_key="+this.settings.apiKey;c.each(m,function(o,p){l+="&"+o+"="+p});c.ajax({dataType:"json",url:l,context:this,success:this._onFlickrResponse})};this._flickrInit=function(){this._flickrRequest("flickr.photosets.getPhotos",{photoset_id:this.settings.photosetId})};this.init()}g.prototype={init:function(){this._flickrInit()}};c.fn[d]=function(j){this.each(function(){if(!c.data(this,"plugin_"+d)){c.data(this,"plugin_"+d,new g(this,j))}});return this}})(jQuery,window,document);